
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="The page collects the standard base code for develop use.">
      
      
        <meta name="author" content="PCNL-iEDA">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-8.0.5">
    
    
      
        <title>计算几何基础 - iEDA Standard Develop Codebase</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.a617204b.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.9204c3b2.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#_1" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../../.." title="iEDA Standard Develop Codebase" class="md-header__button md-logo" aria-label="iEDA Standard Develop Codebase" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            iEDA Standard Develop Codebase
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              计算几何基础
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="清空当前内容" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/PCNL-EDA/iEDA-standard-develop-codebase" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    PCNL-EDA/iEDA-standard-develop-codebase
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../../.." class="md-tabs__link">
      主页
    </a>
  </li>

      
        
  
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../../../algorithm/dynamic_programing/%E8%83%8C%E5%8C%85DP/" class="md-tabs__link">
        算法
      </a>
    </li>
  

  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../cmake/cmake/" class="md-tabs__link">
        CMake
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="./" class="md-tabs__link md-tabs__link--active">
        数据结构
      </a>
    </li>
  

  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="iEDA Standard Develop Codebase" class="md-nav__button md-logo" aria-label="iEDA Standard Develop Codebase" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    iEDA Standard Develop Codebase
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/PCNL-EDA/iEDA-standard-develop-codebase" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    PCNL-EDA/iEDA-standard-develop-codebase
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        主页
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2">
          算法
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="算法" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          算法
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1" type="checkbox" id="__nav_2_1" >
      
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_1">
          动态规划
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="动态规划" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_1">
          <span class="md-nav__icon md-icon"></span>
          动态规划
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../algorithm/dynamic_programing/%E8%83%8C%E5%8C%85DP/" class="md-nav__link">
        背包DP
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../algorithm/dynamic_programing/%E5%8C%BA%E9%97%B4DP/" class="md-nav__link">
        区间DP
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_2" type="checkbox" id="__nav_2_2" >
      
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_2">
          其他算法
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="其他算法" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_2">
          <span class="md-nav__icon md-icon"></span>
          其他算法
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../algorithm/general/%E5%B9%B6%E6%9F%A5%E9%9B%86/" class="md-nav__link">
        并查集
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3">
          CMake
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="CMake" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          CMake
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../cmake/cmake/" class="md-nav__link">
        基本语法
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" checked>
      
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4">
          数据结构
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="数据结构" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          数据结构
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_1" type="checkbox" id="__nav_4_1" checked>
      
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4_1">
          几何
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="几何" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_1">
          <span class="md-nav__icon md-icon"></span>
          几何
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          计算几何基础
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        计算几何基础
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    向量
  </a>
  
    <nav class="md-nav" aria-label="向量">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    点积（内积）
  </a>
  
    <nav class="md-nav" aria-label="点积（内积）">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    线性代数中的通用公式
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    对于二维向量和
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    叉积（外积）
  </a>
  
    <nav class="md-nav" aria-label="叉积（外积）">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    线性代数中的通用公式
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    对于二维向量和
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    单位向量
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    投影
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    例题
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    代码模板
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    点
  </a>
  
    <nav class="md-nav" aria-label="点">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    绕点旋转
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    代码模板
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    例题
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    直线
  </a>
  
    <nav class="md-nav" aria-label="直线">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#-" class="md-nav__link">
    点-线距离
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-_1" class="md-nav__link">
    点-线位置
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    过点做垂线
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-_2" class="md-nav__link">
    直线-直线的位置
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    代码
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    线段
  </a>
  
    <nav class="md-nav" aria-label="线段">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#-_3" class="md-nav__link">
    点-线段位置
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-_4" class="md-nav__link">
    直线-线段位置
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-_5" class="md-nav__link">
    线段-线段位置
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    例题
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_21" class="md-nav__link">
    代码
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_22" class="md-nav__link">
    多边形
  </a>
  
    <nav class="md-nav" aria-label="多边形">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_23" class="md-nav__link">
    凸多边形
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_24" class="md-nav__link">
    多边形面积
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-_6" class="md-nav__link">
    点-多边形位置
  </a>
  
    <nav class="md-nav" aria-label="点-多边形位置">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_25" class="md-nav__link">
    射线法
  </a>
  
    <nav class="md-nav" aria-label="射线法">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_26" class="md-nav__link">
    算法思路
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_27" class="md-nav__link">
    算法特点
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_28" class="md-nav__link">
    转角法
  </a>
  
    <nav class="md-nav" aria-label="转角法">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_29" class="md-nav__link">
    算法思路
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_30" class="md-nav__link">
    算法特点
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_31" class="md-nav__link">
    求凸包（凸壳）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_32" class="md-nav__link">
    稳定凸包
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_33" class="md-nav__link">
    半平面交
  </a>
  
    <nav class="md-nav" aria-label="半平面交">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_34" class="md-nav__link">
    半平面
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_35" class="md-nav__link">
    半平面交
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_36" class="md-nav__link">
    求交
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_37" class="md-nav__link">
    增量法
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_38" class="md-nav__link">
    分治法（二分）
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_39" class="md-nav__link">
    例题
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_40" class="md-nav__link">
    代码
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../heap/%E5%A0%86/" class="md-nav__link">
        堆
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    向量
  </a>
  
    <nav class="md-nav" aria-label="向量">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    点积（内积）
  </a>
  
    <nav class="md-nav" aria-label="点积（内积）">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    线性代数中的通用公式
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    对于二维向量和
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    叉积（外积）
  </a>
  
    <nav class="md-nav" aria-label="叉积（外积）">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    线性代数中的通用公式
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    对于二维向量和
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    单位向量
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    投影
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    例题
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    代码模板
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    点
  </a>
  
    <nav class="md-nav" aria-label="点">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    绕点旋转
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    代码模板
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    例题
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    直线
  </a>
  
    <nav class="md-nav" aria-label="直线">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#-" class="md-nav__link">
    点-线距离
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-_1" class="md-nav__link">
    点-线位置
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    过点做垂线
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-_2" class="md-nav__link">
    直线-直线的位置
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    代码
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    线段
  </a>
  
    <nav class="md-nav" aria-label="线段">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#-_3" class="md-nav__link">
    点-线段位置
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-_4" class="md-nav__link">
    直线-线段位置
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-_5" class="md-nav__link">
    线段-线段位置
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    例题
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_21" class="md-nav__link">
    代码
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_22" class="md-nav__link">
    多边形
  </a>
  
    <nav class="md-nav" aria-label="多边形">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_23" class="md-nav__link">
    凸多边形
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_24" class="md-nav__link">
    多边形面积
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-_6" class="md-nav__link">
    点-多边形位置
  </a>
  
    <nav class="md-nav" aria-label="点-多边形位置">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_25" class="md-nav__link">
    射线法
  </a>
  
    <nav class="md-nav" aria-label="射线法">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_26" class="md-nav__link">
    算法思路
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_27" class="md-nav__link">
    算法特点
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_28" class="md-nav__link">
    转角法
  </a>
  
    <nav class="md-nav" aria-label="转角法">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_29" class="md-nav__link">
    算法思路
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_30" class="md-nav__link">
    算法特点
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_31" class="md-nav__link">
    求凸包（凸壳）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_32" class="md-nav__link">
    稳定凸包
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_33" class="md-nav__link">
    半平面交
  </a>
  
    <nav class="md-nav" aria-label="半平面交">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_34" class="md-nav__link">
    半平面
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_35" class="md-nav__link">
    半平面交
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_36" class="md-nav__link">
    求交
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_37" class="md-nav__link">
    增量法
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_38" class="md-nav__link">
    分治法（二分）
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_39" class="md-nav__link">
    例题
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_40" class="md-nav__link">
    代码
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                

  <h1>计算几何基础</h1>

<h2 id="_1">向量<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h2>
<h3 id="_2">点积（内积）<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h3>
<h4 id="_3">线性代数中的通用公式<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h4>
<p>对于<img alt="n" src="https://math.jianshu.com/math?formula=n" />维的向量<img alt="\vec a" src="https://math.jianshu.com/math?formula=%5Cvec%20a" />和<img alt="\vec b" src="https://math.jianshu.com/math?formula=%5Cvec%20b" />，<img alt="a_i" src="https://math.jianshu.com/math?formula=a_i" />和<img alt="b_i" src="https://math.jianshu.com/math?formula=b_i" />表示向量<img alt="\vec a" src="https://math.jianshu.com/math?formula=%5Cvec%20a" />和<img alt="\vec b" src="https://math.jianshu.com/math?formula=%5Cvec%20b" />在第<img alt="i" src="https://math.jianshu.com/math?formula=i" />个维度上的分量。</p>
<p><img alt="\begin{bmatrix}a_1 \\a_2\\\ldots\\a_{n-1} \\a_n\end{bmatrix} \cdot \begin{bmatrix}b_1 \\b_2\\\ldots\\b_{n-1} \\b_n\end{bmatrix} = a_1b_1+a_2b_b+\ldots+a_{n-1}b_{n-1}+a_nb_n" src="https://math.jianshu.com/math?formula=%5Cbegin%7Bbmatrix%7Da_1%20%5C%5C%5C%5Ca_2%5C%5C%5C%5C%5Cldots%5C%5C%5C%5Ca_%7Bn-1%7D%20%5C%5C%5C%5Ca_n%5Cend%7Bbmatrix%7D%20%5Ccdot%20%5Cbegin%7Bbmatrix%7Db_1%20%5C%5C%5C%5Cb_2%5C%5C%5C%5C%5Cldots%5C%5C%5C%5Cb_%7Bn-1%7D%20%5C%5C%5C%5Cb_n%5Cend%7Bbmatrix%7D%20%3D%20a_1b_1%2Ba_2b_b%2B%5Cldots%2Ba_%7Bn-1%7Db_%7Bn-1%7D%2Ba_nb_n" /></p>
<p>亦可化简为：<img alt="\vec a\cdot\vec b=\sum_{i=1}^{n}a_ib_i" src="https://math.jianshu.com/math?formula=%5Cvec%20a%5Ccdot%5Cvec%20b%3D%5Csum_%7Bi%3D1%7D%5E%7Bn%7Da_ib_i" /></p>
<h4 id="_4">对于二维向量<img alt="\vec a(x_1,y_1)" src="https://math.jianshu.com/math?formula=%5Cvec%20a(x_1%2Cy_1)" />和<img alt="\vec b(x_2,y_2)" src="https://math.jianshu.com/math?formula=%5Cvec%20b(x_2%2Cy_2)" /><a class="headerlink" href="#_4" title="Permanent link">&para;</a></h4>
<ul>
<li>设向量<img alt="\vec a" src="https://math.jianshu.com/math?formula=%5Cvec%20a" />和<img alt="\vec b" src="https://math.jianshu.com/math?formula=%5Cvec%20b" />的模分别为<img alt="|\vec a|" src="https://math.jianshu.com/math?formula=%7C%5Cvec%20a%7C" />和<img alt="|\vec b|" src="https://math.jianshu.com/math?formula=%7C%5Cvec%20b%7C" />，其夹角为<img alt="\theta" src="https://math.jianshu.com/math?formula=%5Ctheta" />，则有</li>
</ul>
<p><img alt="\begin{align} \vec a\cdot\vec b &amp;= |\vec a||\vec b|cos \theta \\ \theta &amp;= arccos(\frac{\vec a\cdot\vec b}{|\vec a||\vec b|}) \end{align}" src="https://math.jianshu.com/math?formula=%5Cbegin%7Balign%7D%20%5Cvec%20a%5Ccdot%5Cvec%20b%20%26%3D%20%7C%5Cvec%20a%7C%7C%5Cvec%20b%7Ccos%20%5Ctheta%20%5C%5C%5C%5C%20%5Ctheta%20%26%3D%20arccos(%5Cfrac%7B%5Cvec%20a%5Ccdot%5Cvec%20b%7D%7B%7C%5Cvec%20a%7C%7C%5Cvec%20b%7C%7D)%20%5Cend%7Balign%7D" /></p>
<ul>
<li><img alt="\vec a在\vec b上的投影：\frac{\vec a\cdot\vec b}{|\vec b|}" src="https://math.jianshu.com/math?formula=%5Cvec%20a%E5%9C%A8%5Cvec%20b%E4%B8%8A%E7%9A%84%E6%8A%95%E5%BD%B1%EF%BC%9A%5Cfrac%7B%5Cvec%20a%5Ccdot%5Cvec%20b%7D%7B%7C%5Cvec%20b%7C%7D" /></li>
<li>向量自身的点积为其长度的平方。</li>
<li>点积与方向的关系：</li>
</ul>
<table>
<thead>
<tr>
<th><img alt="\vec a\cdot\vec b" src="https://math.jianshu.com/math?formula=%5Cvec%20a%5Ccdot%5Cvec%20b" /></th>
<th><img alt="\theta" src="https://math.jianshu.com/math?formula=%5Ctheta" /></th>
<th><img alt="\vec a" src="https://math.jianshu.com/math?formula=%5Cvec%20a" /> 和 <img alt="\vec b" src="https://math.jianshu.com/math?formula=%5Cvec%20b" /> 的方向</th>
</tr>
</thead>
<tbody>
<tr>
<td>&lt;0</td>
<td>钝角</td>
<td>反向</td>
</tr>
<tr>
<td>=0</td>
<td>直角</td>
<td>垂直</td>
</tr>
<tr>
<td>&gt;0</td>
<td>锐角</td>
<td>同向</td>
</tr>
</tbody>
</table>
<h3 id="_5">叉积（外积）<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h3>
<h4 id="_6">线性代数中的通用公式<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h4>
<p>涉及到行列式展开计算，这里用三维举例。
 <img alt="\begin{bmatrix}x_1 \\y_1\\z_1\end{bmatrix} \times \begin{bmatrix}x_2 \\y_2\\z_2\end{bmatrix} = \begin{bmatrix}x_1y_2-x_2y_1 \\x_1z_2-x_2z_1\\z_1y_2-z_2y_1\end{bmatrix}" src="https://math.jianshu.com/math?formula=%5Cbegin%7Bbmatrix%7Dx_1%20%5C%5C%5C%5Cy_1%5C%5C%5C%5Cz_1%5Cend%7Bbmatrix%7D%20%5Ctimes%20%5Cbegin%7Bbmatrix%7Dx_2%20%5C%5C%5C%5Cy_2%5C%5C%5C%5Cz_2%5Cend%7Bbmatrix%7D%20%3D%20%5Cbegin%7Bbmatrix%7Dx_1y_2-x_2y_1%20%5C%5C%5C%5Cx_1z_2-x_2z_1%5C%5C%5C%5Cz_1y_2-z_2y_1%5Cend%7Bbmatrix%7D" /></p>
<h4 id="_7">对于二维向量<img alt="\vec a(x_1,y_1)" src="https://math.jianshu.com/math?formula=%5Cvec%20a(x_1%2Cy_1)" />和<img alt="\vec b(x_2,y_2)" src="https://math.jianshu.com/math?formula=%5Cvec%20b(x_2%2Cy_2)" /><a class="headerlink" href="#_7" title="Permanent link">&para;</a></h4>
<p><img alt="\vec a\times\vec b= x_1y_2-x_2y_1" src="https://math.jianshu.com/math?formula=%5Cvec%20a%5Ctimes%5Cvec%20b%3D%20x_1y_2-x_2y_1" /></p>
<ul>
<li>叉积可以用来求出法向量方向。</li>
<li>叉积为向量围成的平行四边形的面积（带符号）。</li>
<li>若<img alt="\vec a\times\vec b&gt;0" src="https://math.jianshu.com/math?formula=%5Cvec%20a%5Ctimes%5Cvec%20b%3E0" />，则表示<img alt="\vec a" src="https://math.jianshu.com/math?formula=%5Cvec%20a" />可通过逆时针方向旋转至<img alt="\vec b" src="https://math.jianshu.com/math?formula=%5Cvec%20b" />方向，小于0则为顺时针，等于0则表示两个向量共线。</li>
</ul>
<h3 id="_8">单位向量<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h3>
<p>对于向量<img alt="\vec{AB}" src="https://math.jianshu.com/math?formula=%5Cvec%7BAB%7D" />，其单位向量<img alt=" unit(\vec{AB})=\frac{\vec{AB}}{|\vec{AB}|}" src="https://math.jianshu.com/math?formula=%5C%20unit(%5Cvec%7BAB%7D)%3D%5Cfrac%7B%5Cvec%7BAB%7D%7D%7B%7C%5Cvec%7BAB%7D%7C%7D" /></p>
<h3 id="_9">投影<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h3>
<p>对于向量<img alt="\vec{AB}" src="https://math.jianshu.com/math?formula=%5Cvec%7BAB%7D" />、<img alt="\vec{AC}" src="https://math.jianshu.com/math?formula=%5Cvec%7BAC%7D" />，<img alt="\vec{AC}" src="https://math.jianshu.com/math?formula=%5Cvec%7BAC%7D" />在<img alt="\vec{AB}" src="https://math.jianshu.com/math?formula=%5Cvec%7BAB%7D" />上的投影为<img alt="\vec{AC} \cdot (\vec{AB}的单位向量)" src="https://math.jianshu.com/math?formula=%5Cvec%7BAC%7D%20%5Ccdot%20(%5Cvec%7BAB%7D%E7%9A%84%E5%8D%95%E4%BD%8D%E5%90%91%E9%87%8F)" /></p>
<h3 id="_10">例题<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h3>
<p><a href="https://links.jianshu.com/go?to=http%3A%2F%2Fpoj.org%2Fproblem%3Fid%3D2007">POJ 2007：Scrambled Polygon</a></p>
<h3 id="_11">代码模板<a class="headerlink" href="#_11" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1">// 二维向量</span>
<span class="k">struct</span> <span class="nc">Vector</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="n">Vector</span><span class="w"> </span><span class="p">()</span><span class="w"></span>
<span class="w">    </span><span class="p">{}</span><span class="w"></span>

<span class="w">    </span><span class="n">Vector</span><span class="w"> </span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">x</span><span class="p">(</span><span class="n">x</span><span class="p">),</span><span class="w"> </span><span class="n">y</span><span class="p">(</span><span class="n">y</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">{}</span><span class="w"></span>

<span class="w">    </span><span class="c1">// 点积</span>
<span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">operator</span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">Vector</span><span class="w"> </span><span class="n">v</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">v</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">v</span><span class="p">.</span><span class="n">y</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="c1">// 叉积</span>
<span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">operator</span><span class="o">^</span><span class="w"> </span><span class="p">(</span><span class="n">Vector</span><span class="w"> </span><span class="n">v</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">v</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">v</span><span class="p">.</span><span class="n">x</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="c1">// 乘法 </span>
<span class="w">    </span><span class="n">Vector</span><span class="w"> </span><span class="n">operator</span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">d</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">Vector</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">d</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">d</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="c1">// 加法</span>
<span class="w">    </span><span class="n">Vector</span><span class="w"> </span><span class="n">operator</span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="n">Vector</span><span class="w"> </span><span class="n">v</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">Vector</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">v</span><span class="p">.</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">v</span><span class="p">.</span><span class="n">y</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="c1">// 减法</span>
<span class="w">    </span><span class="n">Vector</span><span class="w"> </span><span class="n">operator</span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="n">Vector</span><span class="w"> </span><span class="n">v</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">Vector</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">v</span><span class="p">.</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">v</span><span class="p">.</span><span class="n">y</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="c1">// 模</span>
<span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">length</span><span class="w"> </span><span class="p">()</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">sqrt</span><span class="p">((</span><span class="o">*</span><span class="n">this</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">this</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="c1">// 单位化</span>
<span class="w">    </span><span class="n">Vector</span><span class="w"> </span><span class="n">unit</span><span class="w"> </span><span class="p">()</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">this</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="mf">1.0</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">length</span><span class="p">());</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="p">};</span><span class="w"></span>
</code></pre></div>
<h2 id="_12">点<a class="headerlink" href="#_12" title="Permanent link">&para;</a></h2>
<p>点与向量的表示方法相同，都可以通过两个坐标来表示，直接重用向量即可，无需重复定义。</p>
<h3 id="_13">绕点旋转<a class="headerlink" href="#_13" title="Permanent link">&para;</a></h3>
<p>点绕点旋转，其实可以直接理解成<img alt="\vec{AB}" src="https://math.jianshu.com/math?formula=%5Cvec%7BAB%7D" />旋转到<img alt="\vec{AC}" src="https://math.jianshu.com/math?formula=%5Cvec%7BAC%7D" />，其中点<img alt="A" src="https://math.jianshu.com/math?formula=A" />为旋转的中心。</p>
<p>可以先将<img alt="A" src="https://math.jianshu.com/math?formula=A" />平移至原点，旋转完成后，再平移回原来位置。</p>
<p>设:</p>
<ul>
<li>原向量<img alt="\vec{AB}" src="https://math.jianshu.com/math?formula=%5Cvec%7BAB%7D" />与x轴夹角为<img alt="\beta" src="https://math.jianshu.com/math?formula=%5Cbeta" />，表示为<img alt="(x,y)" src="https://math.jianshu.com/math?formula=(x%2Cy)" /></li>
<li>旋转后的向量<img alt="\vec{AC}" src="https://math.jianshu.com/math?formula=%5Cvec%7BAC%7D" />与x轴夹角为<img alt="\alpha+ \beta" src="https://math.jianshu.com/math?formula=%5Calpha%2B%20%5Cbeta" />,表示为<img alt="(x^,,y^,)" src="https://math.jianshu.com/math?formula=(x%5E%2C%2Cy%5E%2C)" /></li>
<li><img alt="|\vec{AB}|" src="https://math.jianshu.com/math?formula=%7C%5Cvec%7BAB%7D%7C" />为<img alt="r" src="https://math.jianshu.com/math?formula=r" /></li>
</ul>
<p>有如下推导：</p>
<p><img alt="\begin{align} x &amp;= r\cdot \cos \beta \\ y &amp;= r\cdot \sin \beta \\ x^, &amp;= r \cdot \cos{(\alpha+\beta)}\ &amp;= r \cdot (\cos\alpha\cdot \cos\beta-\sin\alpha\cdot \sin\beta) \ &amp;= x\cdot \cos\alpha-y\cdot \sin\alpha \\ y^, &amp;= r \cdot \sin{(\alpha+\beta)}\ &amp;= r \cdot (\sin\alpha\cdot \cos\beta+\cos\alpha\cdot \sin\beta) \ &amp;= x\cdot \sin\alpha+y\cdot \cos\alpha \end{align}" src="https://math.jianshu.com/math?formula=%5Cbegin%7Balign%7D%20x%20%26%3D%20r%5Ccdot%20%5Ccos%20%5Cbeta%20%5C%5C%5C%5C%20y%20%26%3D%20r%5Ccdot%20%5Csin%20%5Cbeta%20%5C%5C%5C%5C%20x%5E%2C%20%26%3D%20r%20%5Ccdot%20%5Ccos%7B(%5Calpha%2B%5Cbeta)%7D%5C%5C%20%26%3D%20r%20%5Ccdot%20(%5Ccos%5Calpha%5Ccdot%20%5Ccos%5Cbeta-%5Csin%5Calpha%5Ccdot%20%5Csin%5Cbeta)%20%5C%5C%20%26%3D%20x%5Ccdot%20%5Ccos%5Calpha-y%5Ccdot%20%5Csin%5Calpha%20%5C%5C%5C%5C%20y%5E%2C%20%26%3D%20r%20%5Ccdot%20%5Csin%7B(%5Calpha%2B%5Cbeta)%7D%5C%5C%20%26%3D%20r%20%5Ccdot%20(%5Csin%5Calpha%5Ccdot%20%5Ccos%5Cbeta%2B%5Ccos%5Calpha%5Ccdot%20%5Csin%5Cbeta)%20%5C%5C%20%26%3D%20x%5Ccdot%20%5Csin%5Calpha%2By%5Ccdot%20%5Ccos%5Calpha%20%5Cend%7Balign%7D" /></p>
<h3 id="_14">代码模板<a class="headerlink" href="#_14" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="cp">#define Point Vector</span>

<span class="w">    </span><span class="c1">// 作为Vector成员函数</span>
<span class="w">    </span><span class="n">Vector</span><span class="w"> </span><span class="nf">rotate</span><span class="w"> </span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">alpha</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">Vector</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">cos</span><span class="p">(</span><span class="n">alpha</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">sin</span><span class="p">(</span><span class="n">alpha</span><span class="p">)),</span><span class="w"></span>
<span class="w">                      </span><span class="n">y</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">sin</span><span class="p">(</span><span class="n">alpha</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">cos</span><span class="p">(</span><span class="n">alpha</span><span class="p">)));</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
<h3 id="_15">例题<a class="headerlink" href="#_15" title="Permanent link">&para;</a></h3>
<p><a href="https://links.jianshu.com/go?to=http%3A%2F%2Fpoj.org%2Fproblem%3Fid%3D2624">POJ 2624：4<sup>th</sup> Point</a></p>
<h2 id="_16">直线<a class="headerlink" href="#_16" title="Permanent link">&para;</a></h2>
<p>两点连成线，用两个点相减即可表示。</p>
<h3 id="-">点-线距离<a class="headerlink" href="#-" title="Permanent link">&para;</a></h3>
<p>对于点A、B所在直线<img alt="\overline {AB}" src="https://math.jianshu.com/math?formula=%5Coverline%20%7BAB%7D" />和点P，P点到直线<img alt="\overline {AB}" src="https://math.jianshu.com/math?formula=%5Coverline%20%7BAB%7D" />的距离有：</p>
<p>设<img alt="P" src="https://math.jianshu.com/math?formula=P" />到<img alt="\overline {AB}" src="https://math.jianshu.com/math?formula=%5Coverline%20%7BAB%7D" />的距离为<img alt=" dist" src="https://math.jianshu.com/math?formula=%5C%20dist" />
 <img alt="\begin{aligned} S_{\vec {PA}、\vec{PB}所构成的平行四边形}&amp;= \vec {PA}\times\vec {PB}\ &amp;=|\vec {AB}|\times dist\qquad \mbox{平行四边形面积公式}\ \Rightarrow dist &amp;= \frac{\vec {PA}\times\vec {PB}}{|\vec {AB}|} \end{aligned}" src="https://math.jianshu.com/math?formula=%5Cbegin%7Baligned%7D%20S_%7B%5Cvec%20%7BPA%7D%E3%80%81%5Cvec%7BPB%7D%E6%89%80%E6%9E%84%E6%88%90%E7%9A%84%E5%B9%B3%E8%A1%8C%E5%9B%9B%E8%BE%B9%E5%BD%A2%7D%26%3D%20%5Cvec%20%7BPA%7D%5Ctimes%5Cvec%20%7BPB%7D%5C%5C%5C%20%26%3D%7C%5Cvec%20%7BAB%7D%7C%5Ctimes%20dist%5Cqquad%20%5Cmbox%7B%E5%B9%B3%E8%A1%8C%E5%9B%9B%E8%BE%B9%E5%BD%A2%E9%9D%A2%E7%A7%AF%E5%85%AC%E5%BC%8F%7D%5C%5C%5C%20%5CRightarrow%20dist%20%26%3D%20%5Cfrac%7B%5Cvec%20%7BPA%7D%5Ctimes%5Cvec%20%7BPB%7D%7D%7B%7C%5Cvec%20%7BAB%7D%7C%7D%20%5Cend%7Baligned%7D" /></p>
<h3 id="-_1">点-线位置<a class="headerlink" href="#-_1" title="Permanent link">&para;</a></h3>
<p>对于点A、B所在直线<img alt="\overline {AB}" src="https://math.jianshu.com/math?formula=%5Coverline%20%7BAB%7D" />和点P，利用前面介绍的叉积与向量方向关系的性质，构造向量<img alt="\vec {PA}" src="https://math.jianshu.com/math?formula=%5Cvec%20%7BPA%7D" />，通过<img alt="\vec {PA} \times \vec{AB}" src="https://math.jianshu.com/math?formula=%5Cvec%20%7BPA%7D%20%5Ctimes%20%5Cvec%7BAB%7D" />来判断P和<img alt="\overline {AB}" src="https://math.jianshu.com/math?formula=%5Coverline%20%7BAB%7D" />的位置关系：
 <img alt="P和\overline {AB}的位置关系= \begin{cases} P在\overline {AB}左侧， &amp;\mbox{\(\vec {PA} \times \vec{AB}&gt;0\)}\ P在\overline {AB}上， &amp;\mbox{\(\vec {PA} \times \vec{AB}=0\)}\ P在\overline {AB}右侧， &amp;\mbox{\(\vec {PA} \times \vec{AB}&lt;0\)}\ \end{cases}" src="https://math.jianshu.com/math?formula=P%E5%92%8C%5Coverline%20%7BAB%7D%E7%9A%84%E4%BD%8D%E7%BD%AE%E5%85%B3%E7%B3%BB%3D%20%5Cbegin%7Bcases%7D%20P%E5%9C%A8%5Coverline%20%7BAB%7D%E5%B7%A6%E4%BE%A7%EF%BC%8C%20%26%5Cmbox%7B%24%5Cvec%20%7BPA%7D%20%5Ctimes%20%5Cvec%7BAB%7D%3E0%24%7D%5C%5C%20P%E5%9C%A8%5Coverline%20%7BAB%7D%E4%B8%8A%EF%BC%8C%20%26%5Cmbox%7B%24%5Cvec%20%7BPA%7D%20%5Ctimes%20%5Cvec%7BAB%7D%3D0%24%7D%5C%5C%20P%E5%9C%A8%5Coverline%20%7BAB%7D%E5%8F%B3%E4%BE%A7%EF%BC%8C%20%26%5Cmbox%7B%24%5Cvec%20%7BPA%7D%20%5Ctimes%20%5Cvec%7BAB%7D%3C0%24%7D%5C%5C%20%5Cend%7Bcases%7D" /></p>
<h3 id="_17">过点做垂线<a class="headerlink" href="#_17" title="Permanent link">&para;</a></h3>
<p>对于点A、B所在直线<img alt="\overline {AB}" src="https://math.jianshu.com/math?formula=%5Coverline%20%7BAB%7D" />和点P：</p>
<p>**垂线：**将直线所在向量<img alt="\vec {AB}" src="https://math.jianshu.com/math?formula=%5Cvec%20%7BAB%7D" />旋转<img alt="\frac{\pi}{2}" src="https://math.jianshu.com/math?formula=%5Cfrac%7B%5Cpi%7D%7B2%7D" />，并平移至经过点<img alt="P" src="https://math.jianshu.com/math?formula=P" />即可。</p>
<p>**垂足：**利用点积求出<img alt="\vec{AP}" src="https://math.jianshu.com/math?formula=%5Cvec%7BAP%7D" />在<img alt="\vec{AB}" src="https://math.jianshu.com/math?formula=%5Cvec%7BAB%7D" />上投影的长度<img alt=" l" src="https://math.jianshu.com/math?formula=%5C%20l" />，<img alt="A+l\cdot (\vec{AB}单位向量)" src="https://math.jianshu.com/math?formula=A%2Bl%5Ccdot%20(%5Cvec%7BAB%7D%E5%8D%95%E4%BD%8D%E5%90%91%E9%87%8F)" />即为垂足的位置。</p>
<h3 id="-_2">直线-直线的位置<a class="headerlink" href="#-_2" title="Permanent link">&para;</a></h3>
<p>对于点<img alt="A" src="https://math.jianshu.com/math?formula=A" />、<img alt="B" src="https://math.jianshu.com/math?formula=B" />所在直线<img alt="\overline {AB}" src="https://math.jianshu.com/math?formula=%5Coverline%20%7BAB%7D" />和C、D所在直线<img alt="\overline {CD}" src="https://math.jianshu.com/math?formula=%5Coverline%20%7BCD%7D" />：</p>
<p>如果二者不相交（平行或相等），则<img alt="A" src="https://math.jianshu.com/math?formula=A" />和<img alt="B" src="https://math.jianshu.com/math?formula=B" />在<img alt="\overline {CD}" src="https://math.jianshu.com/math?formula=%5Coverline%20%7BCD%7D" />同一侧，其叉积值和符号都相同，相减为<img alt="0" src="https://math.jianshu.com/math?formula=0" />。反之则不为零。
 <img alt="\begin{align} S_{ACD} &amp;= \vec{AC}\times\vec{AD} \ S_{BCD} &amp;= \vec{BC}\times\vec{BD} \ S_{ACD}-S_{BCD} &amp;= \begin{cases} 0 &amp;,\mbox{\(\vec{AB}\parallel\vec{CD}\)或\(\vec{AB}=\vec{CD}\)}\ 非0 &amp;,\mbox{$\vec{AB}\nparallel\vec{CD} $}\ \end{cases} \end{align}" src="https://math.jianshu.com/math?formula=%5Cbegin%7Balign%7D%20S_%7BACD%7D%20%26%3D%20%5Cvec%7BAC%7D%5Ctimes%5Cvec%7BAD%7D%20%5C%5C%20S_%7BBCD%7D%20%26%3D%20%5Cvec%7BBC%7D%5Ctimes%5Cvec%7BBD%7D%20%5C%5C%20S_%7BACD%7D-S_%7BBCD%7D%20%26%3D%20%5Cbegin%7Bcases%7D%200%20%26%2C%5Cmbox%7B%24%5Cvec%7BAB%7D%5Cparallel%5Cvec%7BCD%7D%24%E6%88%96%24%5Cvec%7BAB%7D%3D%5Cvec%7BCD%7D%24%7D%5C%5C%20%E9%9D%9E0%20%26%2C%5Cmbox%7B%24%5Cvec%7BAB%7D%5Cnparallel%5Cvec%7BCD%7D%20%24%7D%5C%5C%20%5Cend%7Bcases%7D%20%5Cend%7Balign%7D" /></p>
<ul>
<li>如果二者不相交，则再通过<img alt="A" src="https://math.jianshu.com/math?formula=A" />到<img alt="\overline{CD}" src="https://math.jianshu.com/math?formula=%5Coverline%7BCD%7D" />的距离来判断二者是否相等。距离为<img alt="0" src="https://math.jianshu.com/math?formula=0" />则相等，否则平行。</li>
<li>若二者相交，通过相似三角形的比例关系，可求得则其交点位置为：</li>
</ul>
<p><img alt="A+\frac{S_{ACD}}{S_{ACD}+A_{BCD}}\cdot\vec{AB}" src="https://math.jianshu.com/math?formula=A%2B%5Cfrac%7BS_%7BACD%7D%7D%7BS_%7BACD%7D%2BA_%7BBCD%7D%7D%5Ccdot%5Cvec%7BAB%7D" /></p>
<h3 id="_18">代码<a class="headerlink" href="#_18" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1">// 二维直线</span>
<span class="k">struct</span> <span class="nc">Line</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">Point</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="c1">// 通过两点构造直线</span>
<span class="w">    </span><span class="n">Line</span><span class="w"> </span><span class="p">(</span><span class="n">Point</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">Point</span><span class="w"> </span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">x</span><span class="p">(</span><span class="n">x</span><span class="p">),</span><span class="w"> </span><span class="n">y</span><span class="p">(</span><span class="n">y</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">{}</span><span class="w"></span>

<span class="w">    </span><span class="c1">// 点和方向向量来构造线</span>
<span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="n">Line</span><span class="w"> </span><span class="n">makeLine</span><span class="w"> </span><span class="p">(</span><span class="n">Point</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">Vector</span><span class="w"> </span><span class="n">v</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">Line</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">v</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="n">operator</span><span class="o">==</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Line</span><span class="w"> </span><span class="o">&amp;</span><span class="n">rhs</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">rhs</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"></span>
<span class="w">               </span><span class="n">y</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">rhs</span><span class="p">.</span><span class="n">y</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="n">operator</span><span class="o">!=</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Line</span><span class="w"> </span><span class="o">&amp;</span><span class="n">rhs</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="o">!</span><span class="p">(</span><span class="n">rhs</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="o">*</span><span class="n">this</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="c1">// 线长度</span>
<span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">length</span><span class="w"> </span><span class="p">()</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="n">y</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">x</span><span class="p">).</span><span class="n">length</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="c1">// 点到该直线的距离</span>
<span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">dist</span><span class="w"> </span><span class="p">(</span><span class="n">Point</span><span class="w"> </span><span class="n">p</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">fabs</span><span class="p">((</span><span class="n">x</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">p</span><span class="p">)</span><span class="w"> </span><span class="o">^</span><span class="w"> </span><span class="p">(</span><span class="n">y</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">p</span><span class="p">))</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">length</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="c1">// #define EPS 1e-6</span>
<span class="w">    </span><span class="c1">// 判断点和直线的位置</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">side</span><span class="w"> </span><span class="p">(</span><span class="n">Point</span><span class="w"> </span><span class="n">p</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="kt">double</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">y</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="o">^</span><span class="p">(</span><span class="n">p</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">x</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">fabs</span><span class="p">(</span><span class="n">result</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">EPS</span><span class="p">)</span><span class="w"></span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w">   </span><span class="c1">// 在线上</span>
<span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">result</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"></span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w">   </span><span class="c1">// 左侧</span>
<span class="w">        </span><span class="k">else</span><span class="w"></span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="mi">-1</span><span class="p">;</span><span class="w">  </span><span class="c1">// 右侧</span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="c1">// 过点做垂线</span>
<span class="w">    </span><span class="n">Line</span><span class="w"> </span><span class="n">vertical</span><span class="w"> </span><span class="p">(</span><span class="n">Point</span><span class="w"> </span><span class="n">p</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">makeLine</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">y</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">x</span><span class="p">).</span><span class="n">rotate</span><span class="p">(</span><span class="n">PI</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">2</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="c1">// 垂足</span>
<span class="w">    </span><span class="n">Point</span><span class="w"> </span><span class="n">foot</span><span class="w"> </span><span class="p">(</span><span class="n">Point</span><span class="w"> </span><span class="n">p</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">Vector</span><span class="w"> </span><span class="n">self</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">x</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="n">unit</span><span class="p">()</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">self</span><span class="p">.</span><span class="n">project</span><span class="p">(</span><span class="n">p</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">x</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="n">Point</span><span class="w"> </span><span class="n">intersect</span><span class="w"> </span><span class="p">(</span><span class="n">Line</span><span class="w"> </span><span class="n">l</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="kt">double</span><span class="w"> </span><span class="n">s1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">((</span><span class="n">x</span><span class="o">-</span><span class="n">l</span><span class="p">.</span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="o">^</span><span class="p">(</span><span class="n">l</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">l</span><span class="p">.</span><span class="n">x</span><span class="p">))</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="kt">double</span><span class="w"> </span><span class="n">s2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">((</span><span class="n">l</span><span class="p">.</span><span class="n">y</span><span class="o">-</span><span class="n">l</span><span class="p">.</span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="o">^</span><span class="p">(</span><span class="n">y</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">l</span><span class="p">.</span><span class="n">x</span><span class="p">))</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">fabs</span><span class="p">(</span><span class="n">s1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">s2</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">EPS</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">l</span><span class="p">.</span><span class="n">dist</span><span class="p">(</span><span class="n">x</span><span class="p">))</span><span class="w"></span>
<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="n">l</span><span class="p">.</span><span class="n">x</span><span class="p">;</span><span class="w">   </span><span class="c1">// 重合</span>
<span class="w">            </span><span class="k">else</span><span class="w"></span>
<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="n">l</span><span class="p">.</span><span class="n">y</span><span class="p">;</span><span class="w">   </span><span class="c1">// 平行</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"></span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="n">y</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">s1</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="n">s1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">s2</span><span class="p">));</span><span class="w"> </span><span class="c1">// 交点</span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="p">};</span><span class="w"></span>
</code></pre></div>
<h2 id="_19">线段<a class="headerlink" href="#_19" title="Permanent link">&para;</a></h2>
<h3 id="-_3">点-线段位置<a class="headerlink" href="#-_3" title="Permanent link">&para;</a></h3>
<p>对于点<img alt="P" src="https://math.jianshu.com/math?formula=P" />和线段<img alt="AB" src="https://math.jianshu.com/math?formula=AB" />，构造向量<img alt="\vec{PA}、\vec{AB}" src="https://math.jianshu.com/math?formula=%5Cvec%7BPA%7D%E3%80%81%5Cvec%7BAB%7D" />，求叉积有：
 <img alt="\vec{PA}\times\vec{AB}= \begin{cases} 0 &amp;,\mbox{\(P\)和\(AB\)在同一条直线上(共线)}\ 非0 &amp;,\mbox{\(P\)在线段\(AB\)外}\ \end{cases}" src="https://math.jianshu.com/math?formula=%5Cvec%7BPA%7D%5Ctimes%5Cvec%7BAB%7D%3D%20%5Cbegin%7Bcases%7D%200%20%26%2C%5Cmbox%7B%24P%24%E5%92%8C%24AB%24%E5%9C%A8%E5%90%8C%E4%B8%80%E6%9D%A1%E7%9B%B4%E7%BA%BF%E4%B8%8A(%E5%85%B1%E7%BA%BF)%7D%5C%5C%20%E9%9D%9E0%20%26%2C%5Cmbox%7B%24P%24%E5%9C%A8%E7%BA%BF%E6%AE%B5%24AB%24%E5%A4%96%7D%5C%5C%20%5Cend%7Bcases%7D" />
 对于共线的情况，再根据两个端点的坐标判断，<img alt="P" src="https://math.jianshu.com/math?formula=P" />是否在线段<img alt="AB" src="https://math.jianshu.com/math?formula=AB" />上，即满足以下情况的，即为点<img alt="P" src="https://math.jianshu.com/math?formula=P" />在线段<img alt="AB" src="https://math.jianshu.com/math?formula=AB" />上：
 <img alt="\begin{cases} \min(A.x,B.x) &amp;\leq P.x &amp;\leq\max(A.x,B.x) \ \min(A.y,B.y) &amp;\leq P.y &amp;\leq\max(A.y,B.y) \ \end{cases}" src="https://math.jianshu.com/math?formula=%5Cbegin%7Bcases%7D%20%5Cmin(A.x%2CB.x)%20%26%5Cleq%20P.x%20%26%5Cleq%5Cmax(A.x%2CB.x)%20%5C%5C%20%5Cmin(A.y%2CB.y)%20%26%5Cleq%20P.y%20%26%5Cleq%5Cmax(A.y%2CB.y)%20%5C%5C%20%5Cend%7Bcases%7D" /></p>
<h3 id="-_4">直线-线段位置<a class="headerlink" href="#-_4" title="Permanent link">&para;</a></h3>
<p>对于直线<img alt="AB" src="https://math.jianshu.com/math?formula=AB" />和线段<img alt="CD" src="https://math.jianshu.com/math?formula=CD" />，二者位置关系的判断：</p>
<ol>
<li>
<p>构造向量<img alt="\vec{CA}、\vec{DA}" src="https://math.jianshu.com/math?formula=%5Cvec%7BCA%7D%E3%80%81%5Cvec%7BDA%7D" />，并求叉积<img alt="\vec{CA}\times\vec{AB}、\vec{CB}\times\vec{AB}" src="https://math.jianshu.com/math?formula=%5Cvec%7BCA%7D%5Ctimes%5Cvec%7BAB%7D%E3%80%81%5Cvec%7BCB%7D%5Ctimes%5Cvec%7BAB%7D" /></p>
</li>
<li>
<p>若叉积都不为</p>
</li>
</ol>
<p>，且符号相同，则可认为点</p>
<p>都在向量</p>
<p>同一侧，或二者重合。</p>
<ul>
<li>如果一个端点到直线的距离为<img alt="0" src="https://math.jianshu.com/math?formula=0" />，则二者重合。</li>
<li>
<p>否则，二者不相交。</p>
</li>
<li>
<p>否则二者相交。交点位置求法同*直线-直线交点*位置。</p>
</li>
</ul>
<h3 id="-_5">线段-线段位置<a class="headerlink" href="#-_5" title="Permanent link">&para;</a></h3>
<p>规范相交：两条线段恰有一个不是端点的公共点。</p>
<p>对于直线<img alt="AB" src="https://math.jianshu.com/math?formula=AB" />和线段<img alt="CD" src="https://math.jianshu.com/math?formula=CD" />，利用叉积的符号判断是否为规范相交，即任一条线段的两个端点都分属另一条线段的两侧，满足以下条件：
 <img alt="\begin{cases} (\vec{AB}\times\vec{AC})&amp;与&amp;(\vec{AB}\times\vec{AD})&amp;异号 \ (\vec{CD}\times\vec{CA})&amp;与&amp;(\vec{CD}\times\vec{CB})&amp;异号 \ \end{cases} \\ \Rightarrow \begin{cases} (\vec{AB}\times\vec{AC})\cdot(\vec{AB}\times\vec{AD})&amp;&lt;&amp;0 \ (\vec{CD}\times\vec{CA})\cdot(\vec{CD}\times\vec{CB})&amp;&lt;&amp;0 \ \end{cases} \\" src="https://math.jianshu.com/math?formula=%5Cbegin%7Bcases%7D%20(%5Cvec%7BAB%7D%5Ctimes%5Cvec%7BAC%7D)%26%E4%B8%8E%26(%5Cvec%7BAB%7D%5Ctimes%5Cvec%7BAD%7D)%26%E5%BC%82%E5%8F%B7%20%5C%5C%20(%5Cvec%7BCD%7D%5Ctimes%5Cvec%7BCA%7D)%26%E4%B8%8E%26(%5Cvec%7BCD%7D%5Ctimes%5Cvec%7BCB%7D)%26%E5%BC%82%E5%8F%B7%20%5C%5C%20%5Cend%7Bcases%7D%20%5C%5C%5C%5C%20%5CRightarrow%20%5Cbegin%7Bcases%7D%20(%5Cvec%7BAB%7D%5Ctimes%5Cvec%7BAC%7D)%5Ccdot(%5Cvec%7BAB%7D%5Ctimes%5Cvec%7BAD%7D)%26%3C%260%20%5C%5C%20(%5Cvec%7BCD%7D%5Ctimes%5Cvec%7BCA%7D)%5Ccdot(%5Cvec%7BCD%7D%5Ctimes%5Cvec%7BCB%7D)%26%3C%260%20%5C%5C%20%5Cend%7Bcases%7D%20%5C%5C%5C%5C" /></p>
<p>如不满足以上条件，再判断两条线段的端点是否在另一条线段上，若是则为非规范相交，否则二者不相交。</p>
<h3 id="_20">例题<a class="headerlink" href="#_20" title="Permanent link">&para;</a></h3>
<p><a href="https://links.jianshu.com/go?to=http%3A%2F%2Fpoj.org%2Fproblem%3Fid%3D3304">POJ 3304：Segments</a></p>
<p><a href="https://links.jianshu.com/go?to=http%3A%2F%2Fpoj.org%2Fproblem%3Fid%3D1039">POJ 1039：Pipe</a></p>
<h3 id="_21">代码<a class="headerlink" href="#_21" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1">// 二维线段</span>
<span class="k">struct</span> <span class="nc">Seg</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">Point</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="n">Seg</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Point</span><span class="w"> </span><span class="o">&amp;</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">Point</span><span class="w"> </span><span class="o">&amp;</span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">x</span><span class="p">(</span><span class="n">x</span><span class="p">),</span><span class="w"> </span><span class="n">y</span><span class="p">(</span><span class="n">y</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">{}</span><span class="w"></span>

<span class="w">    </span><span class="c1">// 判断点是否在线段内</span>
<span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="n">pointIn</span><span class="w"> </span><span class="p">(</span><span class="n">Point</span><span class="w"> </span><span class="n">p</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="kt">double</span><span class="w"> </span><span class="n">cross</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">p</span><span class="p">)</span><span class="w"> </span><span class="o">^</span><span class="p">(</span><span class="n">y</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">x</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">fabs</span><span class="p">(</span><span class="n">cross</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">EPS</span><span class="p">)</span><span class="w"></span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">fabs</span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">min</span><span class="p">(</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">.</span><span class="n">x</span><span class="p">))</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">EPS</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"></span>
<span class="w">            </span><span class="n">fabs</span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">min</span><span class="p">(</span><span class="n">x</span><span class="p">.</span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">.</span><span class="n">y</span><span class="p">))</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">EPS</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"></span>
<span class="w">            </span><span class="n">fabs</span><span class="p">(</span><span class="n">max</span><span class="p">(</span><span class="n">x</span><span class="p">.</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">.</span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">EPS</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"></span>
<span class="w">            </span><span class="n">fabs</span><span class="p">(</span><span class="n">max</span><span class="p">(</span><span class="n">x</span><span class="p">.</span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">.</span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">EPS</span><span class="p">)</span><span class="w"></span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="n">Point</span><span class="w"> </span><span class="n">intersect</span><span class="w"> </span><span class="p">(</span><span class="n">Line</span><span class="w"> </span><span class="n">l</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">s1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">l</span><span class="p">.</span><span class="n">side</span><span class="p">(</span><span class="n">x</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">s2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">l</span><span class="p">.</span><span class="n">side</span><span class="p">(</span><span class="n">y</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">s1</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">s2</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="c1">//            if (l.dist(x) &lt; EPS)</span>
<span class="c1">//                return l.y; // 重合</span>
<span class="c1">//            else</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">Point</span><span class="p">(</span><span class="n">EPS</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="n">EPS</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">10</span><span class="p">);</span><span class="c1">// 不相交</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">s1</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">s2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">l</span><span class="p">.</span><span class="n">x</span><span class="p">;</span><span class="c1">// 重合</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">s1</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w">   </span><span class="c1">// 一个端点在直线上</span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">x</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">s2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w">  </span><span class="c1">// 另一个端点在直线上</span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">y</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">Line</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">).</span><span class="n">intersect</span><span class="p">(</span><span class="n">l</span><span class="p">);</span><span class="w"> </span><span class="c1">// 交点</span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="c1">// 判断线段相交</span>
<span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="n">isIntersected</span><span class="w"> </span><span class="p">(</span><span class="n">Seg</span><span class="w"> </span><span class="n">s</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">Point</span><span class="w"> </span><span class="n">p1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="n">Point</span><span class="w"> </span><span class="n">p2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">y</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="n">Point</span><span class="w"> </span><span class="n">p3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">x</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="n">Point</span><span class="w"> </span><span class="n">p4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">y</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="kt">double</span><span class="w"> </span><span class="n">s1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">p3</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">p1</span><span class="p">)</span><span class="w"> </span><span class="o">^</span><span class="p">(</span><span class="n">p4</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">p1</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="kt">double</span><span class="w"> </span><span class="n">s2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">p4</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">p2</span><span class="p">)</span><span class="w"> </span><span class="o">^</span><span class="p">(</span><span class="n">p3</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">p2</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(((</span><span class="n">p2</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">p1</span><span class="p">)</span><span class="w"> </span><span class="o">^</span><span class="w"> </span><span class="p">(</span><span class="n">p3</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">p1</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">((</span><span class="n">p2</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">p1</span><span class="p">)</span><span class="w"> </span><span class="o">^</span><span class="w"> </span><span class="p">(</span><span class="n">p4</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">p1</span><span class="p">)))</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="o">-</span><span class="n">EPS</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"></span>
<span class="w">            </span><span class="p">(((</span><span class="n">p4</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">p3</span><span class="p">)</span><span class="w"> </span><span class="o">^</span><span class="w"> </span><span class="p">(</span><span class="n">p1</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">p3</span><span class="p">))</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">((</span><span class="n">p4</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">p3</span><span class="p">)</span><span class="w"> </span><span class="o">^</span><span class="w"> </span><span class="p">(</span><span class="n">p2</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">p3</span><span class="p">)))</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="o">-</span><span class="n">EPS</span><span class="p">)</span><span class="w"></span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w">   </span><span class="c1">// 规范相交</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">pointIn</span><span class="p">(</span><span class="n">p1</span><span class="p">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">pointIn</span><span class="p">(</span><span class="n">p2</span><span class="p">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">pointIn</span><span class="p">(</span><span class="n">p3</span><span class="p">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">pointIn</span><span class="p">(</span><span class="n">p4</span><span class="p">))</span><span class="w"></span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w">   </span><span class="c1">// 非规范相交</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="n">operator</span><span class="o">==</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Seg</span><span class="w"> </span><span class="o">&amp;</span><span class="n">rhs</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">rhs</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"></span>
<span class="w">               </span><span class="n">y</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">rhs</span><span class="p">.</span><span class="n">y</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="n">operator</span><span class="o">!=</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Seg</span><span class="w"> </span><span class="o">&amp;</span><span class="n">rhs</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="o">!</span><span class="p">(</span><span class="n">rhs</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="o">*</span><span class="n">this</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="p">};</span><span class="w"></span>
</code></pre></div>
<h2 id="_22">多边形<a class="headerlink" href="#_22" title="Permanent link">&para;</a></h2>
<h3 id="_23">凸多边形<a class="headerlink" href="#_23" title="Permanent link">&para;</a></h3>
<blockquote>
<p><a href="https://links.jianshu.com/go?to=https%3A%2F%2Fbaike.baidu.com%2Fitem%2F%E5%87%B8%E5%A4%9A%E8%BE%B9%E5%BD%A2">百度百科</a>：凸多边形是一个内部为<a href="https://links.jianshu.com/go?to=https%3A%2F%2Fbaike.baidu.com%2Fitem%2F%E5%87%B8%E9%9B%86%2F6105027">凸集</a>的简单多边形。凸多边形（Convex Polygon）指如果把一个<a href="https://links.jianshu.com/go?to=https%3A%2F%2Fbaike.baidu.com%2Fitem%2F%E5%A4%9A%E8%BE%B9%E5%BD%A2%2F10076694">多边形</a>的所有边中，任意一条边向两方无限延长成为一直线时，其他各边都在此直线的同旁，那么这个多边形就叫做凸多边形，其<a href="https://links.jianshu.com/go?to=https%3A%2F%2Fbaike.baidu.com%2Fitem%2F%E5%86%85%E8%A7%92">内角</a>应该全不是优角，任意两个<a href="https://links.jianshu.com/go?to=https%3A%2F%2Fbaike.baidu.com%2Fitem%2F%E9%A1%B6%E7%82%B9%2F11030118">顶点</a>间的<a href="https://links.jianshu.com/go?to=https%3A%2F%2Fbaike.baidu.com%2Fitem%2F%E7%BA%BF%E6%AE%B5%2F8679802">线段</a>位于多边形的内部或边上。</p>
</blockquote>
<p>就是没有凹角的多边形，特点是所有边所在的直线都不会穿过其他边。</p>
<h3 id="_24">多边形面积<a class="headerlink" href="#_24" title="Permanent link">&para;</a></h3>
<p>对多边形进行三角剖分：</p>
<ol>
<li>设原点为<img alt="O" src="https://math.jianshu.com/math?formula=O" /></li>
<li>按逆时针方向为个条边指定方向</li>
<li>对于每条边<img alt="\vec{AB}" src="https://math.jianshu.com/math?formula=%5Cvec%7BAB%7D" />，累加<img alt="\frac{\vec{OA}\times\vec{OB}}{2}" src="https://math.jianshu.com/math?formula=%5Cfrac%7B%5Cvec%7BOA%7D%5Ctimes%5Cvec%7BOB%7D%7D%7B2%7D" /></li>
</ol>
<h3 id="-_6">点-多边形位置<a class="headerlink" href="#-_6" title="Permanent link">&para;</a></h3>
<p>设多边形<img alt="P" src="https://math.jianshu.com/math?formula=P" />的顶点序列为<img alt="{p_1,p_2, \ldots ,p_n}" src="https://math.jianshu.com/math?formula=%5C%7Bp_1%2Cp_2%2C%20%5Cldots%20%2Cp_n%5C%7D" />、待判定的点 <img alt="q" src="https://math.jianshu.com/math?formula=q" />。</p>
<h4 id="_25">射线法<a class="headerlink" href="#_25" title="Permanent link">&para;</a></h4>
<h5 id="_26">算法思路<a class="headerlink" href="#_26" title="Permanent link">&para;</a></h5>
<p>过<img alt="q" src="https://math.jianshu.com/math?formula=q" />做水平射线<img alt="l" src="https://math.jianshu.com/math?formula=l" />：</p>
<ul>
<li>
<p>若<img alt="l" src="https://math.jianshu.com/math?formula=l" />与<img alt="P" src="https://math.jianshu.com/math?formula=P" />的边界不相交，则<img alt=" l" src="https://math.jianshu.com/math?formula=%5C%20l" />在<img alt="P" src="https://math.jianshu.com/math?formula=P" />的外部。</p>
</li>
<li>
<p>若相交，则再分析交点数的奇偶性。</p>
</li>
</ul>
<table>
<thead>
<tr>
<th>交点数</th>
<th>点相对于多边形的位置</th>
</tr>
</thead>
<tbody>
<tr>
<td>奇数</td>
<td>内部</td>
</tr>
<tr>
<td>偶数</td>
<td>外部</td>
</tr>
</tbody>
</table>
<ul>
<li>
<p>需要注意的是，当多边形不是凸多边形时，需要考虑特殊情况：</p>
</li>
<li>
<p>射线恰好经过<img alt="P" src="https://math.jianshu.com/math?formula=P" />的某个顶点</p>
</li>
<li>射线恰好与<img alt="P" src="https://math.jianshu.com/math?formula=P" />的某条边重合</li>
</ul>
<h5 id="_27">算法特点<a class="headerlink" href="#_27" title="Permanent link">&para;</a></h5>
<ol>
<li>运算速度快</li>
<li>精度高</li>
<li>特殊情况较多</li>
</ol>
<h4 id="_28">转角法<a class="headerlink" href="#_28" title="Permanent link">&para;</a></h4>
<h5 id="_29">算法思路<a class="headerlink" href="#_29" title="Permanent link">&para;</a></h5>
<p>沿多边形走一圈，累计绕点旋转了多少角度。（需要保证边的方向一致）</p>
<table>
<thead>
<tr>
<th>角度</th>
<th>点相对于多边形的位置</th>
</tr>
</thead>
<tbody>
<tr>
<td><img alt="0" src="https://math.jianshu.com/math?formula=0" /></td>
<td>外部</td>
</tr>
<tr>
<td><img alt="\pi" src="https://math.jianshu.com/math?formula=%5Cpi" /></td>
<td>点在多边形的边上</td>
</tr>
<tr>
<td><img alt="\pm2\pi" src="https://math.jianshu.com/math?formula=%5Cpm2%5Cpi" /></td>
<td>内部</td>
</tr>
</tbody>
</table>
<p>通过点积公式可以求出:
 <img alt="\theta = \arccos{\frac{\vec{a}\cdot\vec{b}}{|\vec{a}|\cdot|\vec{b}|}}" src="https://math.jianshu.com/math?formula=%5Ctheta%20%3D%20%5Carccos%7B%5Cfrac%7B%5Cvec%7Ba%7D%5Ccdot%5Cvec%7Bb%7D%7D%7B%7C%5Cvec%7Ba%7D%7C%5Ccdot%7C%5Cvec%7Bb%7D%7C%7D%7D" />
 **（仅适用于凸包)**或使用累乘叉乘，判断点和边的位置关系：</p>
<ul>
<li>当点位于所有边向量的同一侧时（叉乘值同号），其在多边形内部。</li>
<li>如果没有出现在同一侧，则为外部（叉乘值异号）。</li>
<li>在多边形上的情况是可以直接判断出来的（叉乘为0）。</li>
</ul>
<h5 id="_30">算法特点<a class="headerlink" href="#_30" title="Permanent link">&para;</a></h5>
<ul>
<li>几乎没有特殊情况</li>
<li>精度低、速度较慢（需要用到反三角函数、开方等）</li>
</ul>
<h3 id="_31">求凸包（凸壳）<a class="headerlink" href="#_31" title="Permanent link">&para;</a></h3>
<p>给定一个平面点集，要求找到一个最小的凸多边形，满足点集中所有点都在凸多边形内部或边上。</p>
<h3 id="_32">稳定凸包<a class="headerlink" href="#_32" title="Permanent link">&para;</a></h3>
<p>对于已有的凸包中，无法通过在平面中添加一个点获取到更大的凸包，则该已有的凸包称为*稳定凸包*。</p>
<p><strong>特性</strong>：凸包的每条边上，都有大于等于<img alt="3" src="https://math.jianshu.com/math?formula=3" />个的顶点。</p>
<p>具体可见例题【<em>POJ 1228 Grandpa's Estate</em>】。</p>
<h3 id="_33">半平面交<a class="headerlink" href="#_33" title="Permanent link">&para;</a></h3>
<h4 id="_34">半平面<a class="headerlink" href="#_34" title="Permanent link">&para;</a></h4>
<p>一条直线将一个平面分为2个半平面，直线是有向的，设直线方向左边的平面为我们研究的半平面（包含直线）。</p>
<h4 id="_35">半平面交<a class="headerlink" href="#_35" title="Permanent link">&para;</a></h4>
<p>被（多个）半平面包含的点的集合。</p>
<p>**性质：**半平面交的结果是一个凸区域。</p>
<h4 id="_36">求交<a class="headerlink" href="#_36" title="Permanent link">&para;</a></h4>
<p>对于每一条多边形的每一条边<img alt="\vec{AB}" src="https://math.jianshu.com/math?formula=%5Cvec%7BAB%7D" />、表示半平面的直线<img alt="\vec{l}" src="https://math.jianshu.com/math?formula=%5Cvec%7Bl%7D" />：</p>
<ol>
<li>对多边形按照逆时针排序。</li>
<li>如果边<img alt="\vec{AB}" src="https://math.jianshu.com/math?formula=%5Cvec%7BAB%7D" />的起点<img alt="A" src="https://math.jianshu.com/math?formula=A" />位于半平面<img alt="l" src="https://math.jianshu.com/math?formula=l" />中，则将点<img alt="A" src="https://math.jianshu.com/math?formula=A" />加入结果集。</li>
<li>求边<img alt="\vec{AB}" src="https://math.jianshu.com/math?formula=%5Cvec%7BAB%7D" />与<img alt="l" src="https://math.jianshu.com/math?formula=l" />的交点，并将结果加入结果集。（即使点<img alt="A" src="https://math.jianshu.com/math?formula=A" />不在半平面中，也需要这步操作）</li>
</ol>
<h4 id="_37">增量法<a class="headerlink" href="#_37" title="Permanent link">&para;</a></h4>
<ol>
<li>构造一个足够大的矩形。</li>
<li>依次用半平面和该矩形求交。</li>
</ol>
<p><strong>时间复杂度：</strong><img alt="O(n^2)" src="https://math.jianshu.com/math?formula=O(n%5E2)" /></p>
<h4 id="_38">分治法（二分）<a class="headerlink" href="#_38" title="Permanent link">&para;</a></h4>
<ol>
<li>将<img alt="n" src="https://math.jianshu.com/math?formula=n" />个半平面分成<img alt="2" src="https://math.jianshu.com/math?formula=2" />个大小近似相等的集合。</li>
<li>递归地构造凸多边形区域<img alt="A" src="https://math.jianshu.com/math?formula=A" />与<img alt="A'" src="https://math.jianshu.com/math?formula=A'" />。</li>
<li>合并<img alt="A" src="https://math.jianshu.com/math?formula=A" />与<img alt="A'" src="https://math.jianshu.com/math?formula=A'" />。</li>
</ol>
<p><strong>时间复杂度：</strong><img alt="O(n \cdot \log{n})" src="https://math.jianshu.com/math?formula=O(n%20%5Ccdot%20%5Clog%7Bn%7D)" /></p>
<h3 id="_39">例题<a class="headerlink" href="#_39" title="Permanent link">&para;</a></h3>
<p><a href="https://links.jianshu.com/go?to=http%3A%2F%2Fpoj.org%2Fproblem%3Fid%3D1569">POJ 1569:Myacm Triangles</a>
 <a href="https://links.jianshu.com/go?to=http%3A%2F%2Fpoj.org%2Fproblem%3Fid%3D1113">POJ 1113-Wall</a>
 <a href="https://links.jianshu.com/go?to=http%3A%2F%2Fpoj.org%2Fproblem%3Fid%3D1228">POJ 1228-Grandpa's Estate</a></p>
<h3 id="_40">代码<a class="headerlink" href="#_40" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1">// 二维多边形</span>
<span class="k">struct</span> <span class="nc">Polygon</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// 点集</span>
<span class="w">    </span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Point</span><span class="o">&gt;</span><span class="w"> </span><span class="n">points</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="n">Polygon</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Point</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&amp;</span><span class="n">points</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">points</span><span class="p">(</span><span class="n">points</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">{}</span><span class="w"></span>

<span class="w">    </span><span class="n">Polygon</span><span class="w"> </span><span class="p">()</span><span class="w"></span>
<span class="w">    </span><span class="p">{}</span><span class="w"></span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 根据已排序的点集来求半个凸壳（上半个或下半个）</span>
<span class="cm">     * @param pts 已排序的点集</span>
<span class="cm">     * @return 半个凸包中的点，有序，逆时针序</span>
<span class="cm">     */</span><span class="w"></span>
<span class="w">    </span><span class="n">deque</span><span class="o">&lt;</span><span class="n">Point</span><span class="o">&gt;</span><span class="w"> </span><span class="n">getHalfConvexHull</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Point</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&amp;</span><span class="n">pts</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">deque</span><span class="o">&lt;</span><span class="n">Point</span><span class="o">&gt;</span><span class="w"> </span><span class="n">deq</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">si</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pts</span><span class="p">.</span><span class="n">size</span><span class="p">();</span><span class="w"></span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="n">deq</span><span class="p">.</span><span class="n">pb</span><span class="p">(</span><span class="n">pts</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span><span class="w"></span>
<span class="w">        </span><span class="n">deq</span><span class="p">.</span><span class="n">pb</span><span class="p">(</span><span class="n">pts</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span><span class="w"></span>
<span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">si</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="n">Point</span><span class="w"> </span><span class="n">nt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pts</span><span class="p">[</span><span class="n">i</span><span class="p">];</span><span class="w"></span>
<span class="w">            </span><span class="o">++</span><span class="n">i</span><span class="p">;</span><span class="w"></span>
<span class="w">            </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">deq</span><span class="p">.</span><span class="n">size</span><span class="p">()</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"></span>
<span class="w">            </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="n">Point</span><span class="w"> </span><span class="n">p2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">deq</span><span class="p">[</span><span class="n">deq</span><span class="p">.</span><span class="n">size</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="p">],</span><span class="w"> </span><span class="n">p1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">deq</span><span class="p">.</span><span class="n">back</span><span class="p">();</span><span class="w"></span>
<span class="w">                </span><span class="n">Vector</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p2</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">p1</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p1</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">nt</span><span class="p">;</span><span class="w"></span>
<span class="w">                </span><span class="kt">double</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">b</span><span class="w"> </span><span class="o">^</span><span class="w"> </span><span class="n">a</span><span class="p">);</span><span class="w"></span>
<span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">d</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"></span>
<span class="w">                    </span><span class="n">deq</span><span class="p">.</span><span class="n">pop_back</span><span class="p">();</span><span class="w"></span>
<span class="w">                </span><span class="k">else</span><span class="w"></span>
<span class="w">                    </span><span class="k">break</span><span class="p">;</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>

<span class="w">            </span><span class="n">deq</span><span class="p">.</span><span class="n">pb</span><span class="p">(</span><span class="n">nt</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">deq</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * 水平序扫描法</span>
<span class="cm">     * 求该多边形的凸包</span>
<span class="cm">     * @return 凸包的点集，有序，逆时针序</span>
<span class="cm">     */</span><span class="w"></span>
<span class="w">    </span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Point</span><span class="o">&gt;</span><span class="w"> </span><span class="n">getConvexHull</span><span class="w"> </span><span class="p">()</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Point</span><span class="o">&gt;</span><span class="w"> </span><span class="n">pts</span><span class="p">(</span><span class="n">points</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Point</span><span class="o">&gt;</span><span class="w"> </span><span class="n">con</span><span class="p">;</span><span class="w"></span>


<span class="w">        </span><span class="c1">// 2个点无法构成凸包</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">pts</span><span class="p">.</span><span class="n">size</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">con</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>

<span class="w">        </span><span class="c1">// 下凸壳</span>
<span class="w">        </span><span class="n">sort</span><span class="p">(</span><span class="n">pts</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span><span class="w"> </span><span class="n">pts</span><span class="p">.</span><span class="n">end</span><span class="p">());</span><span class="w"></span>
<span class="w">        </span><span class="n">deque</span><span class="o">&lt;</span><span class="n">Point</span><span class="o">&gt;</span><span class="w"> </span><span class="n">temp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getHalfConvexHull</span><span class="p">(</span><span class="n">pts</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">temp</span><span class="p">.</span><span class="n">size</span><span class="p">();</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="n">con</span><span class="p">.</span><span class="n">pb</span><span class="p">(</span><span class="n">temp</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="n">temp</span><span class="p">.</span><span class="n">clear</span><span class="p">();</span><span class="w"></span>


<span class="w">        </span><span class="c1">// 上凸壳</span>
<span class="w">        </span><span class="n">sort</span><span class="p">(</span><span class="n">pts</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span><span class="w"> </span><span class="n">pts</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span><span class="w"> </span><span class="n">greater</span><span class="o">&lt;</span><span class="n">Point</span><span class="o">&gt;</span><span class="p">());</span><span class="w"></span>
<span class="w">        </span><span class="n">temp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getHalfConvexHull</span><span class="p">(</span><span class="n">pts</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">temp</span><span class="p">.</span><span class="n">size</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="n">con</span><span class="p">.</span><span class="n">pb</span><span class="p">(</span><span class="n">temp</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">con</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
</code></pre></div>

              
            </article>
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" data-md-state="hidden">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg>
            回到页面顶部
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="页脚">
      
        
        <a href="../../../cmake/cmake/" class="md-footer__link md-footer__link--prev" aria-label="上一页: 基本语法" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                上一页
              </span>
              基本语法
            </div>
          </div>
        </a>
      
      
        
        <a href="../../heap/%E5%A0%86/" class="md-footer__link md-footer__link--next" aria-label="下一页: 堆" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                下一页
              </span>
              堆
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2021 PCNL 开源芯片院士工作室
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../../..", "features": ["content.code.annotate", "navigation.indexes", "navigation.sections", "navigation.tabs", "navigation.top", "navigation.tracking"], "translations": {"clipboard.copy": "\u590d\u5236", "clipboard.copied": "\u5df2\u590d\u5236", "search.config.lang": "ja", "search.config.pipeline": "trimmer, stemmer", "search.config.separator": "[\\uff0c\\u3002]+", "search.placeholder": "\u641c\u7d22", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.term.missing": "\u7f3a\u5c11", "select.version.title": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}, "search": "../../../assets/javascripts/workers/search.cefbb252.min.js"}</script>
    
    
      <script src="../../../assets/javascripts/bundle.a5f8ea78.min.js"></script>
      
    
  </body>
</html>